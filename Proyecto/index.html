<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Menú Escolar - Cliente</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

    <!-- Estilos personalizados -->
    <link rel="stylesheet" href="css/style.css">

    <style>
        .btn-toggle-wrapper {
            display: flex;
            justify-content: center;
        }

        .btn-toggle-container {
            background-color: #f1f1f7;
            border-radius: 50px;
            padding: 4px;
            display: flex;
            box-shadow: inset 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .btn-toggle-group button {
            border-radius: 50px;
            padding: 0.4rem 2rem;
            border: none;
            background-color: transparent;
            color: #004B7F;
            font-weight: 500;
            font-size: 1.2rem;
            transition: all 0.3s ease-in-out;
        }

        .btn-toggle-group button.active {
            background-color: #004B7F;
            color: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        h2 {
            font-weight: 700;
            margin-bottom: 1rem;
            border-bottom: 2px solid #eee;
            padding-bottom: 0.5rem;
        }

        #platillo-del-dia {
            display: none;
        }
    </style>
</head>

<body>

    <!-- Logo -->
    <header class="bg-white py-4 text-center">
        <div class="container">
            <img src="/imagenes/logo.png" alt="Logo" class="img-fluid" style="max-height: 120px;" />
        </div>
    </header>

    <!-- Barra de navegación -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
            <a class="navbar-brand d-lg-none" href="#"></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContenido"
                aria-controls="navbarContenido" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse menu-desktop-center" id="navbarContenido">
                <ul class="navbar-nav mb-2 mb-lg-0 text-start">
                    <div class="menu-header-mobile">
                        <img src="/imagenes/umar.png" alt="UMAR Logo" class="img-fluid">
                        <div class="la-cafe-brand">La Café</div>
                        <div class="menu-divider"></div>
                    </div>
                    <li class="nav-item">
                        <a class="nav-link active" href="#"><i class="bi bi-house-door-fill"></i> Menú Principal</a>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="#"><i class="bi bi-search-heart"></i> Explorar</a>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="#"><i class="bi bi-basket-fill"></i> Mi Pedido</a>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="#"><i class="bi bi-cup-straw"></i> Bebidas</a></li>
                    <li class="nav-item"><a class="nav-link" href="#"><i class="bi bi-lightbulb-fill"></i>
                            Sugerencias</a></li>
                    <li class="nav-item"><a class="nav-link" href="#"><i class="bi bi-envelope-fill"></i>
                            Contáctanos</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Título -->
    <div class="container text-center py-3">
        <h1 class="site-title">La Café</h1>
        <p class="site-subtitle">Campus Puerto Escondido</p>
    </div>

    <!-- Contenido principal -->
    <main class="container my-5">
        <section aria-labelledby="menu-principal">
            <h2 id="menu-principal">Menú principal</h2>

            <!-- Botones de selección -->
            <div class="btn-toggle-wrapper mb-4">
                <div class="btn-toggle-container">
                    <div class="btn-toggle-group d-flex">
                        <button type="button" id="btnDesayunos" class="active">Desayunos</button>
                        <button type="button" id="btnComidas">Comidas</button>
                    </div>
                </div>
            </div>

            <!-- Contenido dinámico -->
            <article id="platillo-del-dia">
                <img id="img-platillo" src="" alt="Platillo del día" class="img-fluid mb-3" style="max-height: 200px;">
                <h3 id="nombre-platillo"></h3>
                <p id="descripcion-platillo"></p>
                <p id="precio-platillo"></p>
            </article>
        </section>

        <section aria-labelledby="explorar">
            <h2 id="explorar">Explorar</h2>
        </section>

        <section aria-labelledby="bebidas">
            <h2 id="bebidas">Bebidas</h2>
        </section>
    </main>

    <!-- Script Firebase + lógica -->
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCuX8adG6CViy3xhHPdAp1z6btrz5rX2hM",
            authDomain: "menuescolar-16d5f.firebaseapp.com",
            projectId: "menuescolar-16d5f",
            storageBucket: "menuescolar-16d5f.appspot.com",
            messagingSenderId: "909257466427",
            appId: "1:909257466427:web:cb164397451f349810b21e"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        document.addEventListener("DOMContentLoaded", () => {
            const dias = ["domingo", "lunes", "martes", "miércoles", "jueves", "viernes", "sábado"];
            const hoy = dias[new Date().getDay()];

            const img = document.getElementById("img-platillo");
            const nombre = document.getElementById("nombre-platillo");
            const descripcion = document.getElementById("descripcion-platillo");
            const precio = document.getElementById("precio-platillo");
            const platilloDelDia = document.getElementById("platillo-del-dia");

            const btnDesayunos = document.getElementById("btnDesayunos");
            const btnComidas = document.getElementById("btnComidas");

            async function mostrar(tipo) {
                const docId = `${hoy}-${tipo}`;
                const docRef = db.collection("platillos").doc(docId);
                const docSnap = await docRef.get();

                if (docSnap.exists) {
                    const p = docSnap.data();
                    img.src = p.imagen;
                    img.alt = p.nombre;
                    nombre.textContent = p.nombre;
                    descripcion.textContent = p.descripcion;
                    precio.textContent = `$${p.precio}`;
                    platilloDelDia.style.display = "block";
                } else {
                    platilloDelDia.innerHTML = `<p class="text-muted">No hay ${tipo} registrado para hoy (${hoy}).</p>`;
                    platilloDelDia.style.display = "block";
                }
            }

            btnDesayunos.addEventListener("click", () => {
                btnDesayunos.classList.add("active");
                btnComidas.classList.remove("active");
                mostrar("desayuno");
            });

            btnComidas.addEventListener("click", () => {
                btnComidas.classList.add("active");
                btnDesayunos.classList.remove("active");
                mostrar("comida");
            });

            mostrar("desayuno");
        });
    </script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>